const Xn={},Dn=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function l(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=l(i);fetch(i.href,s)}};Dn();function Hn(a,n,l){const c=document.createElement("label");c.innerText=a,c.htmlFor=a;const i=document.createElement("input");i.value=n,i.name=a;const s=document.createElement("div");return s.classList.add("control-item"),s.appendChild(c),s.appendChild(i),l.appendChild(s),{controlParent:s,controlElement:i}}function A(a,n,l,c,i){const{controlElement:s,controlParent:g}=Hn(l,c.toString(),i);return s.type="range",s.min=a.toString(),s.max=n.toString(),s.classList.add("range-element"),g.appendChild(kn(s)),s}function kn(a){const n=document.createElement("input");return n.classList.add("number-element"),n.min=a.min,n.max=a.max,n.type="number",n.value=a.value,a.addEventListener("change",()=>{n.value=a.value}),n.addEventListener("change",()=>{a.value=n.value,a.dispatchEvent(new InputEvent("change"))}),n}var Wn=function(){var a=Xn.url;return function(n){n=n||{};var n=typeof n!="undefined"?n:{},l,c;n.ready=new Promise(function(e,t){l=e,c=t});var i={},s;for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);var g=!1,m=!1,_=!1,N=!1;g=typeof window=="object",m=typeof importScripts=="function",_=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",N=!g&&!_&&!m;var d="";function mn(e){return n.locateFile?n.locateFile(e,d):d+e}var F,H,I,k,W;_?(m?d=require("path").dirname(d)+"/":d=__dirname+"/",F=function(t,r){return k||(k=require("fs")),W||(W=require("path")),t=W.normalize(t),k.readFileSync(t,r?null:"utf8")},I=function(t){var r=F(t,!0);return r.buffer||(r=new Uint8Array(r)),j(r.buffer),r},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof Bn))throw e}),process.on("unhandledRejection",U),n.inspect=function(){return"[Emscripten Module object]"}):N?(typeof read!="undefined"&&(F=function(t){return read(t)}),I=function(t){var r;return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(r=read(t,"binary"),j(typeof r=="object"),r)},typeof scriptArgs!="undefined"&&scriptArgs,typeof print!="undefined"&&(typeof console=="undefined"&&(console={}),console.log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)):(g||m)&&(m?d=self.location.href:typeof document!="undefined"&&document.currentScript&&(d=document.currentScript.src),a&&(d=a),d.indexOf("blob:")!==0?d=d.substr(0,d.lastIndexOf("/")+1):d="",F=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(I=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),H=function(e,t,r){var u=new XMLHttpRequest;u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status==200||u.status==0&&u.response){t(u.response);return}r()},u.onerror=r,u.send(null)}),n.print||console.log.bind(console);var T=n.printErr||console.warn.bind(console);for(s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);i=null,n.arguments,n.thisProgram,n.quit;var C;n.wasmBinary&&(C=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&U("no native wasm support detected");var K,Y=!1;function j(e,t){e||U("Assertion failed: "+t)}function $(e){var t=n["_"+e];return j(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function J(e,t,r,u,v){var p={string:function(w){var P=0;if(w!=null&&w!==0){var un=(w.length<<2)+1;P=G(un),hn(w,P,un)}return P},array:function(w){var P=G(w.length);return wn(w,P),P}};function o(w){return t==="string"?vn(w):t==="boolean"?Boolean(w):w}var f=$(e),h=[],S=0;if(u)for(var b=0;b<u.length;b++){var cn=p[r[b]];cn?(S===0&&(S=on()),h[b]=cn(u[b])):h[b]=u[b]}var X=f.apply(null,h);return X=o(X),S!==0&&fn(S),X}function dn(e,t,r,u){r=r||[];var v=r.every(function(o){return o==="number"}),p=t!=="string";return p&&v&&!u?$(e):function(){return J(e,t,r,arguments)}}var Q=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function yn(e,t,r){for(var u=t+r,v=t;e[v]&&!(v>=u);)++v;if(v-t>16&&e.subarray&&Q)return Q.decode(e.subarray(t,v));for(var p="";t<v;){var o=e[t++];if(!(o&128)){p+=String.fromCharCode(o);continue}var f=e[t++]&63;if((o&224)==192){p+=String.fromCharCode((o&31)<<6|f);continue}var h=e[t++]&63;if((o&240)==224?o=(o&15)<<12|f<<6|h:o=(o&7)<<18|f<<12|h<<6|e[t++]&63,o<65536)p+=String.fromCharCode(o);else{var S=o-65536;p+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return p}function vn(e,t){return e?yn(q,e,t):""}function gn(e,t,r,u){if(!(u>0))return 0;for(var v=r,p=r+u-1,o=0;o<e.length;++o){var f=e.charCodeAt(o);if(f>=55296&&f<=57343){var h=e.charCodeAt(++o);f=65536+((f&1023)<<10)|h&1023}if(f<=127){if(r>=p)break;t[r++]=f}else if(f<=2047){if(r+1>=p)break;t[r++]=192|f>>6,t[r++]=128|f&63}else if(f<=65535){if(r+2>=p)break;t[r++]=224|f>>12,t[r++]=128|f>>6&63,t[r++]=128|f&63}else{if(r+3>=p)break;t[r++]=240|f>>18,t[r++]=128|f>>12&63,t[r++]=128|f>>6&63,t[r++]=128|f&63}}return t[r]=0,r-v}function hn(e,t,r){return gn(e,q,t,r)}function wn(e,t){Z.set(e,t)}var Z,q;function An(e){n.HEAP8=Z=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=new Int32Array(e),n.HEAPU8=q=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=new Float64Array(e)}n.INITIAL_MEMORY;var V,x=[],M=[],Rn=[],nn=[];M.push({func:function(){sn()}});function Sn(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Pn(n.preRun.shift());L(x)}function bn(){L(M)}function En(){L(Rn)}function _n(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)In(n.postRun.shift());L(nn)}function Pn(e){x.unshift(e)}function In(e){nn.unshift(e)}var R=0,O=null;function Tn(e){R++,n.monitorRunDependencies&&n.monitorRunDependencies(R)}function Cn(e){if(R--,n.monitorRunDependencies&&n.monitorRunDependencies(R),R==0&&O){var t=O;O=null,t()}}n.preloadedImages={},n.preloadedAudios={};function U(e){n.onAbort&&n.onAbort(e),e+="",T(e),Y=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw c(t),t}function en(e,t){return String.prototype.startsWith?e.startsWith(t):e.indexOf(t)===0}var On="data:application/octet-stream;base64,";function tn(e){return en(e,On)}var Un="file://";function rn(e){return en(e,Un)}var y="renderEngine.wasm";tn(y)||(y=mn(y));function an(e){try{if(e==y&&C)return new Uint8Array(C);if(I)return I(e);throw"both async and sync fetching of the wasm failed"}catch(t){U(t)}}function Nn(){if(!C&&(g||m)){if(typeof fetch=="function"&&!rn(y))return fetch(y,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+y+"'";return e.arrayBuffer()}).catch(function(){return an(y)});if(H)return new Promise(function(e,t){H(y,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return an(y)})}function Fn(){var e={a:Ln};function t(o,f){var h=o.exports;n.asm=h,K=n.asm.a,An(K.buffer),V=n.asm.g,Cn()}Tn();function r(o){t(o.instance)}function u(o){return Nn().then(function(f){return WebAssembly.instantiate(f,e)}).then(o,function(f){T("failed to asynchronously prepare wasm: "+f),U(f)})}function v(){return!C&&typeof WebAssembly.instantiateStreaming=="function"&&!tn(y)&&!rn(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(function(o){var f=WebAssembly.instantiateStreaming(o,e);return f.then(r,function(h){return T("wasm streaming compile failed: "+h),T("falling back to ArrayBuffer instantiation"),u(r)})}):u(r)}if(n.instantiateWasm)try{var p=n.instantiateWasm(e,t);return p}catch(o){return T("Module.instantiateWasm callback failed with error: "+o),!1}return v().catch(c),{}}function L(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(n);continue}var r=t.func;typeof r=="number"?t.arg===void 0?V.get(r)():V.get(r)(t.arg):r(t.arg===void 0?null:t.arg)}}var Ln={};Fn();var sn=n.___wasm_call_ctors=function(){return(sn=n.___wasm_call_ctors=n.asm.b).apply(null,arguments)};n._render=function(){return(n._render=n.asm.c).apply(null,arguments)};var on=n.stackSave=function(){return(on=n.stackSave=n.asm.d).apply(null,arguments)},fn=n.stackRestore=function(){return(fn=n.stackRestore=n.asm.e).apply(null,arguments)},G=n.stackAlloc=function(){return(G=n.stackAlloc=n.asm.f).apply(null,arguments)};n.ccall=J,n.cwrap=dn;var B;function Bn(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}O=function e(){B||z(),B||(O=e)};function z(e){if(R>0||(Sn(),R>0))return;function t(){B||(B=!0,n.calledRun=!0,!Y&&(bn(),En(),l(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),_n()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),t()},1)):t()}if(n.run=z,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return z(),n.ready}}();const E=document.createElement("canvas"),ln=E.getContext("2d");async function jn(a,n){if(n&&n[0]){a.innerHTML="";const l=n[0],c=await Gn(l);a.appendChild(E);const i=new Image;i.src=c.toString(),i.onload=()=>{const s=zn(i.width,i.height);E.setAttribute("width",s.width.toString()),E.setAttribute("height",s.height.toString()),ln.drawImage(i,0,0,E.width,E.height),qn(a,i)}}}function qn(a,n){const l={brightness:A(-100,100,"Brightness",0,a),contrast:A(-100,100,"Contrast",0,a),saturation:A(-100,100,"Saturation",0,a),redSaturation:A(-100,100,"Red Saturation",0,a),orangeSaturation:A(-100,100,"Orange Saturation",0,a),yellowSaturation:A(-100,100,"Yellow Saturation",0,a),greenSaturation:A(-100,100,"Green Saturation",0,a),tealSaturation:A(-100,100,"Teal Saturation",0,a),cyanSaturation:A(-100,100,"Cyan Saturation",0,a),blueSaturation:A(-100,100,"Blue Saturation",0,a),purpleSaturation:A(-100,100,"Purple Saturation",0,a),magentaSaturation:A(-100,100,"Magenta Saturation",0,a)};Wn().then(c=>{const i=c.cwrap("render","number",["number","array","number"]);Object.values(l).forEach(s=>s.addEventListener("change",()=>Vn(n,E,ln,l,i,c)))})}function Vn(a,n,l,c,i,s){const g=Object.values(c).map(N=>Number.parseInt(N.value));l.drawImage(a,0,0,n.width,n.height);const m=l.getImageData(0,0,n.width,n.height),_=new Uint8Array(s.HEAP8.buffer,0,m.data.length);_.set(m.data),i(0,g,m.data.length),m.data.set(_),l.putImageData(m,0,0)}function Gn(a){return new Promise((n,l)=>{const c=new FileReader;c.readAsDataURL(a),c.onload=()=>n(c.result?c.result.toString():""),c.onerror=i=>l(i)})}function zn(a,n){const l=window.innerHeight*.5,c=window.innerWidth*.5;let i;return a>n?i={width:c,height:c*n/a}:i={width:l*a/n,height:l},i}const pn=document.querySelector("#app"),D=document.createElement("input");D.setAttribute("type","file");pn.appendChild(D);D.addEventListener("change",()=>{jn(pn,D.files)});
