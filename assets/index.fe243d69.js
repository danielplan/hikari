const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}};E();function I(e,t,a){const i=document.createElement("div"),n=document.createElement("label");n.innerText=e,n.htmlFor=e;const r=document.createElement("input");return r.value=t,r.name=e,i.appendChild(n),i.appendChild(r),a.appendChild(i),r}function u(e,t,a,i,n){const r=I(a,i.toString(),n),o=document.createElement("input");return o.type="number",o.min=e.toString(),o.max=t.toString(),o.type="number",o.value=r.value,r.addEventListener("change",()=>{o.value=r.value}),o.addEventListener("change",()=>{r.value=o.value,r.dispatchEvent(new InputEvent("change"))}),r.type="range",r.min=e.toString(),r.max=t.toString(),n.appendChild(o),r}function d(e,t,a){const n=Math.max(e.data[t+0],e.data[1],e.data[2])*a/100;e.data[t+0]+=+n,e.data[t+1]+=+n,e.data[t+2]+=+n}function f(e,t,a){const i=Math.max(e.data[t+0],e.data[t+1],e.data[t+2]),n=(255-i)*(a*-1)/100;e.data[t+0]+=+n,e.data[t+1]+=+n,e.data[t+2]+=+n}function m(e,t){e.imageData.data[e.i+0]+=(e.imageData.data[e.i+0]-e.mean)*t/100,e.imageData.data[e.i+1]+=(e.imageData.data[e.i+1]-e.mean)*t/100,e.imageData.data[e.i+2]+=(e.imageData.data[e.i+2]-e.mean)*t/100}function S(e,t){return(e.data[t+0]+e.data[t+1]+e.data[t+2])/3}function L(e){return e>125}function x(e,t){let a=e.data[t+0],i=e.data[t+1],n=e.data[t+2];a/=255,i/=255,n/=255;let r=Math.max(a,i,n),o=Math.min(a,i,n),s=(r+o)/2;if(r==o)s=0;else{var l=r-o;switch(r){case a:s=(i-n)/l+(i<n?6:0);break;case i:s=(n-a)/l+2;break;case n:s=(a-i)/l+4;break}s/=6}return s*360}function b(e,t,a){return e>t&&e<=a}function C(e){return e.hue>350||e.hue<=10}function k(e){return b(e.hue,100,130)}function B(e){return b(e.hue,230,250)}function M(e,t,a,i){a.drawImage(e,0,0,t.width,t.height);const n=a.getImageData(0,0,t.width,t.height);for(let r=0;r<n.data.length;r+=4){const o={imageData:n,i:r},s=S(n,r),l={imageData:n,i:r,mean:s},y=x(n,r),h={imageData:n,i:r,mean:s,hue:y};N(o,i.brightness.value),j(o,i.contrast.value),A(l,i.saturation.value),p(h,i.greenSaturation.value,"green"),p(h,i.redSaturation.value,"red"),p(h,i.blueSaturation.value,"blue")}a.putImageData(n,0,0)}function N(e,t){t=Number.parseInt(t)*.5,t>0?d(e.imageData,e.i,t):f(e.imageData,e.i,t*-1)}function j(e,t){t=Number.parseInt(t)*.5;const a=S(e.imageData,e.i);L(a)?t>0?d(e.imageData,e.i,t):f(e.imageData,e.i,t):t>0?f(e.imageData,e.i,t):d(e.imageData,e.i,t*-1)}function A(e,t){t=Number.parseInt(t),m(e,t)}function p(e,t,a){switch(t=Number.parseInt(t),a){case"red":C(e)&&m(e,t);break;case"green":k(e)&&m(e,t);break;case"blue":B(e)&&m(e,t);break}}const c=document.createElement("canvas"),w=c.getContext("2d");async function O(e,t){if(t&&t[0]){e.innerHTML="";const a=t[0],i=await P(a);e.appendChild(c);const n=new Image;n.src=i.toString(),n.onload=()=>{const r=v(n.width,n.height);c.setAttribute("width",r.width.toString()),c.setAttribute("height",r.height.toString()),w.drawImage(n,0,0,c.width,c.height),R(e,n)}}}function R(e,t){const a={brightness:u(-100,100,"Brightness",0,e),contrast:u(-100,100,"Contrast",0,e),saturation:u(-100,100,"Saturation",0,e),redSaturation:u(-100,100,"Red Saturation",0,e),greenSaturation:u(-100,100,"Green Saturation",0,e),blueSaturation:u(-100,100,"Blue Saturation",0,e),purpleSaturation:u(-100,100,"Purple Saturation",0,e),tealSaturation:u(-100,100,"Teal Saturation",0,e),yellowSaturation:u(-100,100,"Yellow Saturation",0,e)};Object.values(a).forEach(i=>{i.addEventListener("change",()=>M(t,c,w,a))})}function P(e){return new Promise((t,a)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result?i.result.toString():""),i.onerror=n=>a(n)})}function v(e,t){const a=window.innerHeight*.5,i=window.innerWidth*.5;let n;return e>t?n={width:i,height:i*t/e}:n={width:a*e/t,height:a},n}const D=document.querySelector("#app"),g=document.createElement("input");g.setAttribute("type","file");D.appendChild(g);g.addEventListener("change",()=>{O(D,g.files)});
