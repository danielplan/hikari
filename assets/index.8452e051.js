var I=Object.defineProperty;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(t,n,r)=>n in t?I(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,f=(t,n)=>{for(var r in n||(n={}))k.call(n,r)&&w(t,r,n[r]);if(v)for(var r of v(n))O.call(n,r)&&w(t,r,n[r]);return t};const A=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=r(e);fetch(e.href,a)}};A();function S(t,n,r){const o=document.createElement("label");o.innerText=t,o.htmlFor=t;const e=document.createElement("input");e.value=n,e.name=t;const a=document.createElement("div");return a.classList.add("control-item"),a.appendChild(o),a.appendChild(e),r.appendChild(a),{controlParent:a,controlElement:e}}function s(t,n,r,o,e){const{controlElement:a,controlParent:i}=S(r,o.toString(),e);return a.type="range",a.min=t.toString(),a.max=n.toString(),a.classList.add("range-element"),i.appendChild(M(a)),a}function b(t,n){const{controlElement:r}=S(t,"1",n);return r.type="checkbox",r.classList.add("checkbox-element"),r}function M(t){const n=document.createElement("input");return n.classList.add("number-element"),n.min=t.min,n.max=t.max,n.type="number",n.value=t.value,t.addEventListener("input",()=>{n.value=t.value}),n.addEventListener("change",()=>{t.value=n.value,t.dispatchEvent(new InputEvent("change"))}),n}function C(t,n,r,o,e,a){const i=Object.values(o).map(c=>c.checked?1:0),d=Object.values(e).map(c=>Number.parseInt(c.value)),h=n.getImageData(0,0,t.width,t.height);a.postMessage({settingsValues:i,controlValues:d,imageData:h}),a.onmessage=c=>{const m=c.data;r.putImageData(m,0,0)}}function R(t,n,r,o){const e=document.createElement("canvas"),a=t.width,i=t.height;let d=0,h=0,c=1920;a>i?(c=Math.min(c,a),d=c,h=i*c/a):(c=Math.min(c,i),h=c,d=a*c/i),e.width=d,e.height=h;const m=e.getContext("2d");m.drawImage(t,0,0,e.width,e.height),C(e,m,m,n,r,o),o.onmessage=()=>{const L=e.toDataURL("image/jpg"),g=document.createElement("a");g.download="hikari-export.jpg",g.href=L,g.click(),g.remove()}}function j(){return new Worker("/hikari/assets/renderWorker.80cbd16c.js",{type:"module"})}const u=document.createElement("canvas"),l=document.createElement("canvas"),y=u.getContext("2d"),E=l.getContext("2d");async function D(t,n){if(n&&n[0]){t.innerHTML="";const r=n[0],o=await B(r);t.appendChild(u);const e=new Image;e.src=o.toString(),e.onload=()=>{const a=N(e.width,e.height);u.setAttribute("width",a.width.toString()),u.setAttribute("height",a.height.toString()),y.drawImage(e,0,0,u.width,u.height),l.setAttribute("width",a.width.toString()),l.setAttribute("height",a.height.toString()),E.drawImage(e,0,0,l.width,l.height),W(t,e)}}}function P(t,n,r,o,e){const a=document.createElement("button");a.textContent="Export",a.onclick=()=>R(n,r,o,e),t.appendChild(a)}function W(t,n){const r={invert:b("Invert",t),bw:b("Black & White",t)},o={brightness:s(-100,100,"Brightness",0,t),contrast:s(-100,100,"Contrast",0,t),saturation:s(-100,100,"Saturation",0,t),redSaturation:s(-100,100,"Red Saturation",0,t),orangeSaturation:s(-100,100,"Orange Saturation",0,t),yellowSaturation:s(-100,100,"Yellow Saturation",0,t),greenSaturation:s(-100,100,"Green Saturation",0,t),tealSaturation:s(-100,100,"Teal Saturation",0,t),cyanSaturation:s(-100,100,"Cyan Saturation",0,t),blueSaturation:s(-100,100,"Blue Saturation",0,t),purpleSaturation:s(-100,100,"Purple Saturation",0,t),magentaSaturation:s(-100,100,"Magenta Saturation",0,t)},e=new j;e.postMessage({load:!0});const a=f(f({},r),o);P(t,n,r,o,e),Object.values(a).forEach(i=>i.addEventListener("change",()=>C(l,E,y,r,o,e)))}function B(t){return new Promise((n,r)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=()=>n(o.result?o.result.toString():""),o.onerror=e=>r(e)})}function N(t,n){const r=window.innerHeight*.5,o=window.innerWidth*.5;let e;return t>n?e={width:o,height:o*n/t}:e={width:r*t/n,height:r},e}const x=document.querySelector("#app"),p=document.createElement("input");p.setAttribute("type","file");x.appendChild(p);p.addEventListener("change",()=>{D(x,p.files)});
