const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};E();function I(e,t,i){const a=document.createElement("div"),n=document.createElement("label");n.innerText=e,n.htmlFor=e;const r=document.createElement("input");return r.value=t,r.name=e,a.appendChild(n),a.appendChild(r),i.appendChild(a),r}function o(e,t,i,a,n){const r=I(i,a.toString(),n),u=document.createElement("input");return u.type="number",u.min=e.toString(),u.max=t.toString(),u.type="number",u.value=r.value,r.addEventListener("change",()=>{u.value=r.value}),u.addEventListener("change",()=>{r.value=u.value,r.dispatchEvent(new InputEvent("change"))}),r.type="range",r.min=e.toString(),r.max=t.toString(),n.appendChild(u),r}function f(e,t,i){const n=Math.max(e.data[t+0],e.data[1],e.data[2])*i/100;e.data[t+0]+=+n,e.data[t+1]+=+n,e.data[t+2]+=+n}function p(e,t,i){const a=Math.min(e.data[t+0],e.data[t+1],e.data[t+2]),n=(255-a)*(i*-1)/100;e.data[t+0]+=+n,e.data[t+1]+=+n,e.data[t+2]+=+n}function S(e,t){e.imageData.data[e.i+0]+=(e.imageData.data[e.i+0]-e.mean)*t/100,e.imageData.data[e.i+1]+=(e.imageData.data[e.i+1]-e.mean)*t/100,e.imageData.data[e.i+2]+=(e.imageData.data[e.i+2]-e.mean)*t/100}function w(e,t){return(e.data[t+0]+e.data[t+1]+e.data[t+2])/3}function C(e){return e>125}function m(e,t,i){return e>t&&e<=i}function v(e,t){let i=e.data[t+0],a=e.data[t+1],n=e.data[t+2];i/=255,a/=255,n/=255;let r=Math.max(i,a,n),u=Math.min(i,a,n),s=(r+u)/2;if(r==u)s=0;else{var h=r-u;switch(r){case i:s=(a-n)/h+(a<n?6:0);break;case a:s=(n-i)/h+2;break;case n:s=(i-a)/h+4;break}s/=6}return s*360}function L(e){return e.hue>340||e.hue<=10}function x(e){return m(e.hue,10,40)}function M(e){return m(e.hue,40,60)}function B(e){return m(e.hue,60,130)}function N(e){return m(e.hue,130,160)}function O(e){return m(e.hue,160,220)}function j(e){return m(e.hue,220,260)}function A(e){return m(e.hue,260,300)}function P(e){return m(e.hue,300,340)}function R(e,t,i,a){i.drawImage(e,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height);for(let r=0;r<n.data.length;r+=4){const u={imageData:n,i:r},s=w(n,r),h={imageData:n,i:r,mean:s},D=v(n,r),c={imageData:n,i:r,mean:s,hue:D};k(u,a.brightness.value),T(u,a.contrast.value),F(h,a.saturation.value),l(c,a.redSaturation.value,L),l(c,a.orangeSaturation.value,x),l(c,a.yellowSaturation.value,M),l(c,a.greenSaturation.value,B),l(c,a.tealSaturation.value,N),l(c,a.cyanSaturation.value,O),l(c,a.blueSaturation.value,j),l(c,a.magentaSaturation.value,P),l(c,a.purpleSaturation.value,A)}i.putImageData(n,0,0)}function k(e,t){t=Number.parseInt(t)*.5,t>0?f(e.imageData,e.i,t):p(e.imageData,e.i,t*-1)}function T(e,t){t=Number.parseInt(t)*.5;const i=w(e.imageData,e.i);C(i)?t>0?f(e.imageData,e.i,t):p(e.imageData,e.i,t):t>0?p(e.imageData,e.i,t):f(e.imageData,e.i,t*-1)}function F(e,t){t=Number.parseInt(t),S(e,t)}function l(e,t,i){t=Number.parseInt(t),i(e)&&S(e,t)}const g=document.createElement("canvas"),b=g.getContext("2d");async function q(e,t){if(t&&t[0]){e.innerHTML="";const i=t[0],a=await H(i);e.appendChild(g);const n=new Image;n.src=a.toString(),n.onload=()=>{const r=Y(n.width,n.height);g.setAttribute("width",r.width.toString()),g.setAttribute("height",r.height.toString()),b.drawImage(n,0,0,g.width,g.height),G(e,n)}}}function G(e,t){const i={brightness:o(-100,100,"Brightness",0,e),contrast:o(-100,100,"Contrast",0,e),saturation:o(-100,100,"Saturation",0,e),redSaturation:o(-100,100,"Red Saturation",0,e),orangeSaturation:o(-100,100,"Orange Saturation",0,e),yellowSaturation:o(-100,100,"Yellow Saturation",0,e),greenSaturation:o(-100,100,"Green Saturation",0,e),tealSaturation:o(-100,100,"Teal Saturation",0,e),cyanSaturation:o(-100,100,"Cyan Saturation",0,e),blueSaturation:o(-100,100,"Blue Saturation",0,e),purpleSaturation:o(-100,100,"Purple Saturation",0,e),magentaSaturation:o(-100,100,"Magenta Saturation",0,e)};Object.values(i).forEach(a=>{a.addEventListener("change",()=>R(t,g,b,i))})}function H(e){return new Promise((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result?a.result.toString():""),a.onerror=n=>i(n)})}function Y(e,t){const i=window.innerHeight*.5,a=window.innerWidth*.5;let n;return e>t?n={width:a,height:a*t/e}:n={width:i*e/t,height:i},n}const y=document.querySelector("#app"),d=document.createElement("input");d.setAttribute("type","file");y.appendChild(d);d.addEventListener("change",()=>{q(y,d.files)});
